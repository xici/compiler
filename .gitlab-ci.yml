image: openjdk:11

stages:
  - build

build:
  stage: build
  script:
    - "echo 'Compiling Java source files...'"
    - "mkdir -p out"
    - "find . -name \"*.java\" > sources.txt"
    - "javac -d out @sources.txt"
    - "echo 'Building JAR package...'"
    - "echo 'Main-Class: Main' > manifest.txt"
    - "jar cfm MyProject.jar manifest.txt -C out ."
  artifacts:
    paths:
      - MyProject.jar
    expire_in: 1 week
